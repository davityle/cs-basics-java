package com.github.davityle.csbasics.data.tree;

import org.junit.Test;

import java.util.Arrays;
import java.util.List;
import java.util.ArrayList;
import java.util.Random;

import static org.junit.Assert.*;

/**
 *
 */
public class TreeTrieTest {
    /** generated from listofrandomwords.com */
    private final String[] strings = {
        "Knockabout",
        "deoxygenise",
        "unplaned",
        "blixen",
        "chlorophyllous",
        "roomiest",
        "snatchier",
        "submitted",
        "suppositive",
        "intersqueezed",
        "scrog",
        "prederiving",
        "palladizing",
        "kingless",
        "Droolier",
        "parsimony",
        "georg",
        "sparring",
        "dandification",
        "anodontia",
        "veilless",
        "unaristocratic",
        "stateroom",
        "predisplacement",
        "flare",
        "demineralizing",
        "chinï¿¥ï¾½",
        "caresser",
        "Soothe",
        "antagonize",
        "monotrichous",
        "unneutralised",
        "propound",
        "privateer",
        "preadmirer",
        "compostela",
        "undeteriorating",
        "subcrescentic",
        "precessional",
        "gesso",
        "stokowski",
        "unholily",
        "Cacophonous",
        "asteriscuses",
        "uncognized",
        "emulsifiability",
        "sainfoin",
        "intumesce",
        "vastness",
        "clementia",
        "centre",
        "lob",
        "dredging",
        "hyperdulia",
        "unshredded",
        "anthracnose",
        "Razorbill",
        "gallivanter",
        "abvolt",
        "off",
        "dinesen",
        "transempirical",
        "nondefaulting",
        "underexposing",
        "jacana",
        "rosily",
        "jamesean",
        "fan",
        "jaundice",
        "trochoid",
        "Unfused",
        "pyorrhoeal",
        "brutalising",
        "brownprint",
        "nonethical",
        "mesotron",
        "staybolt",
        "bilithon",
        "spidery",
        "viperishly",
        "sunburst",
        "ferocity",
        "corncrake",
        "fractionating",
        "Nonreduced",
        "phantasmal",
        "byelorussia",
        "cyesis",
        "articulability",
        "throughly",
        "mottle",
        "faveolate",
        "calorimetric",
        "jibouti",
        "massedly",
        "endameba",
        "desexualize",
        "immingle",
        "Lagerlf",
        "drabbest",
        "unshorn",
        "tetrad",
        "speedwell",
        "hyperkinesia",
        "hypothecator",
        "desiderata",
        "ditch",
        "prepledging",
        "precool",
        "shipway",
        "prediscourage",
        "procrastinate",
        "Aletes",
        "unarraigned",
        "versatile",
        "nondeprecatorily",
        "nicholas",
        "distichous",
        "shelepin",
        "sina",
        "spectrocolorimetry",
        "ascendant",
        "gambusia",
        "overmortgage",
        "chertsey",
        "volvulus",
        "Laundrywoman",
        "fyrd",
        "precast",
        "intermeasured",
        "apprehensiveness",
        "archer",
        "transportive",
        "acetifying",
        "remultiplying",
        "reticulum",
        "minority",
        "unsententious",
        "burking",
        "supergenerous",
        "Titrable",
        "spited",
        "lapsable",
        "synchroflash",
        "eberhard",
        "unsurrounded",
        "rock",
        "range",
        "chrysocolla",
        "lengthways",
        "reclaimer",
        "mismeasuring",
        "uninvokable",
        "navicula",
        "Danette",
        "ranket",
        "handbill",
        "tragic",
        "doxologically",
        "craiova",
        "eimmart",
        "bantam",
        "inadmissible",
        "defibrillator",
        "uncatholicized",
        "mense",
        "overanimation",
        "gustav",
        "Pya",
        "sensualness",
        "pliably",
        "decalogue",
        "acetation",
        "unsettlement",
        "floccillation",
        "jewelry",
        "cleanliness",
        "kazantzakis",
        "bethesda",
        "warbeck",
        "occidentally",
        "outflame",
        "Haematocele",
        "sulfating",
        "laxly",
        "sadhu",
        "yoni",
        "invisible",
        "petted",
        "bastion",
        "unpretended",
        "cretheus",
        "repairable",
        "undismayed",
        "salicylaldehyde",
        "donald",
        "Ricinolein",
        "nonneutrality",
        "revest",
        "geography",
        "synapse",
        "cwlth",
        "nonabsentation",
        "flipflopped",
        "vascularity",
        "bhutto",
        "coz",
        "pintado",
        "tressured",
        "tingle",
        "Gibber",
        "corvo",
        "namhoi",
        "monobasicity",
        "spicate",
        "velocipede",
        "gutted",
        "hernial",
        "angrier",
        "claw",
        "lovelier",
        "ornithic",
        "scarious",
        "linnaean",
        "Embraceable",
        "zoogloeal",
        "dovetail",
        "neiva",
        "altitude",
        "syphilizing",
        "nontelegraphical",
        "metatoluidine",
        "antihelix",
        "nunnated",
        "acidness",
        "jobless",
        "overdiluting",
        "rescrubbed",
        "Canonizing",
        "illuminating",
        "choriambus",
        "hypnosperm",
        "intermeddle",
        "clerically",
        "asteropaeus",
        "gallicising",
        "reintroduction",
        "unity",
        "unanswerableness",
        "prenegotiation",
        "monkfishes",
        "septaria",
        "Secularist",
        "epionychium",
        "retouch",
        "hyperinsulinism",
        "acquiescence",
        "illegibleness",
        "apothegmatically",
        "upstairs",
        "indigoid",
        "unsplinted",
        "prudery",
        "transmute",
        "cameralist",
        "piacenza",
        "Kriemhild",
        "innovated",
        "cellule",
        "endogen",
        "bentonite",
        "nikaria",
        "underadjustment",
        "aggrandising",
        "bromoil",
        "uncompendious",
        "upsurged",
        "nonemployment",
        "worshiping",
        "hennaed"
    };


    @Test
    public void testAdd() throws Exception {
        TreeTrie trie = new TreeTrie();
        List<String> list = Arrays.asList(strings);

        list.forEach(trie::add);
        list.forEach(s -> assertTrue(trie.has(s)));

        String dumb = "$^&28464-dasfnhfd//\"   48930274";
        trie.add(dumb);
        assertTrue(trie.has(dumb));

        Random rand = new Random();
        ArrayList<String> arrayList = new ArrayList<>();

        for(int i = 0; i < 10000; i++) {
            StringBuilder builder = new StringBuilder();
            for(int j = 0, length = rand.nextInt(300); j < length; j++) {
                builder.append((char) (1 + rand.nextInt(Character.MAX_CODE_POINT - 1)));
            }
            String s = builder.toString();
            arrayList.add(s);
            trie.add(s);
        }

        arrayList.forEach(s -> assertTrue(trie.has(s)));
    }

    @Test
    public void testHas() throws Exception {
        TreeTrie trie = new TreeTrie();
        List<String> list = Arrays.asList(strings);

        Random rand = new Random();

        list.forEach(trie::add);
        list.forEach(s -> {
            assertTrue(trie.has(s));
            assertFalse(trie.has(s + rand.nextInt()));
            assertFalse(trie.has(s.substring(0, s.length() - 1)));
        });
    }
}